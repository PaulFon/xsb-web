<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Mass (XSB) â€” Hub</title>
<style>
  :root {
    --bg:#0b0b0c; --fg:#f5f7fa; --muted:#c9d1d9;
    --card:#16181d; --link:#9cd1ff;
    --btn:#1f6feb; --btnTxt:#fff;
  }
  html,body {
    margin:0; height:100%;
    background:var(--bg); color:var(--fg);
    font:17px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji";
  }
  .wrap { max-width:780px; margin:5vh auto; padding:24px; }
  header { margin:0 0 20px; }
  h1 { font-size:30px; line-height:1.2; margin:0 0 8px; }
  p.lead { color:var(--muted); margin:0; }
  .grid {
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
    gap:14px; margin:20px 0 8px;
  }
  .btn {
    display:block; text-align:center;
    padding:16px 14px; border-radius:14px;
    background:var(--btn); color:var(--btnTxt);
    text-decoration:none; font-weight:600;
  }
  .btn.alt {
    background:var(--card); color:var(--fg);
    border:1px solid #2a2f3a;
  }
  .footer { margin-top:22px; color:var(--muted); font-size:14px; }
  a.simple { color:var(--link); }
</style>

<header class="wrap">
  <h1>Missal + Lectionary (XSB)</h1>
  <p class="lead">Private workspace for Mass content (gated). Choose where to go:</p>
</header>

<main class="wrap">
  <div class="grid">
    <a class="btn" id="btn-latest" href="/mass/en-US/">Latest</a>
    <a class="btn alt" href="/mass/en-US/general/2025/">Browse by Date</a>
    <a class="btn alt" href="/mass/en-US/general/">All Generated Pages</a>
    <a class="btn alt" href="/mass/assets/">Assets</a>
    <a class="btn alt" href="/">Back to CanonicalEye.org</a>
    <a class="btn alt" href="https://wiki.canonicaleye.org/">Wiki</a>
  </div>
  <div class="footer">Need access? Contact the site admin.</div>
</main>

<script>
(async () => {
  try {
    const resp = await fetch('/mass/assets/manifest.json', { cache: 'no-store' });
    if (!resp.ok) return;
    const data = await resp.json();
    if (data && data.latest_url) {
      const btn = document.getElementById('btn-latest');
      if (btn) {
        const base = '/mass';
        btn.href = base + '/' + data.latest_url.replace(/^\/+/, '');
      }
    }
  } catch (e) {
    console.error("Manifest update failed:", e);
  }
})();
</script>